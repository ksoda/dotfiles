#!/bin/sh

touch "$HOME"/.psqlrc.local

if [ -e "$HOME"/.vim/autoload/plug.vim ]; then
  vim -E -s +PlugUpgrade +qa
else
  curl -fLo "$HOME"/.vim/autoload/plug.vim --create-dirs \
    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
fi
vim -u "$HOME"/.vimrc.bundles +PlugUpdate +PlugClean! +qa

systemctl --user enable imwheel
systemctl --user restart imwheel

fish -c '
if not functions -q fisher
    set -q XDG_CONFIG_HOME; or set XDG_CONFIG_HOME ~/.config
    curl https://git.io/fisher --create-dirs -sLo $XDG_CONFIG_HOME/fish/functions/fisher.fish
    fish -c fisher
end
'

fish -c "
fisher add 0rax/fish-bd jethrokuan/fzf jethrokuan/z laughedelic/pisces oh-my-fish/plugin-foreign-env oh-my-fish/plugin-sudope rafaelrinaldi/pure daenney/rbenv evanlucas/fish-kubectl-completions
"

go get -u github.com/motemen/ghq
go get -u github.com/gokcehan/lf

git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
~/.tmux/plugins/tpm/bindings/install_plugins

curl -fsSL https://github.com/rbenv/rbenv-installer/raw/master/bin/rbenv-installer | bash

curl https://get.volta.sh | bash
volta install node

curl https://nixos.org/nix/install | sh

# Interactive
cat <<TEXT
set -Ux fish_user_paths $HOME/go/bin $HOME/.volta/bin $HOME/.cargo/bin $HOME/.rbenv/bin/ $fish_user_paths
Setup:
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

curl --proto '=https' --tlsv1.2 -sSf https://get-ghcup.haskell.org | sh
TEXT

echo 'set -g fish_user_paths path/to/bin $fish_user_paths'

reset -Q
